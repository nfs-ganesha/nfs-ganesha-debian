--- nfs-ganesha-5.0/src/CMakeLists.txt.orig	2023-04-25 11:35:53.644000000 -0400
+++ nfs-ganesha-5.0/src/CMakeLists.txt	2023-04-25 11:36:11.276000000 -0400
@@ -593,11 +593,11 @@
 
 gopt_test(USE_ADMIN_TOOLS)
 if (USE_ADMIN_TOOLS)
-  find_package (Python COMPONENTS Interpreter Development)
-  if (NOT Python_Interpreter_FOUND)
-    message(WARNING "Cannot find python. Disablin admin tools")
+  find_package(PythonInterp REQUIRED)
+  if (NOT PYTHONINTERP_FOUND)
+    message(WARNING "Cannot find python. Disabling admin tools")
     set(USE_ADMIN_TOOLS OFF)
-  endif (NOT Python_Interpreter_FOUND)
+  endif (NOT PYTHONINTERP_FOUND)
 endif (USE_ADMIN_TOOLS)
 
 gopt_test(USE_GUI_ADMIN_TOOLS)
@@ -1197,8 +1197,9 @@
   link_directories (${MOOSHIKA_LIBRARY_DIRS})
 endif(USE_9P_RDMA)
 
-set(NTIRPC_MIN_VERSION 4.0)
+set(NTIRPC_MIN_VERSION 5.0)
 if (USE_SYSTEM_NTIRPC)
+  set(NTIRPC_INCLUDE_DIR "/usr/include/ntirpc/")
   find_package(NTIRPC ${NTIRPC_MIN_VERSION} REQUIRED)
   if (USE_LTTNG)
     set(NTIRPC_LIBRARY ${NTIRPC_LIBRARY} ${NTIRPC_LTTNG})
--- nfs-ganesha-5.0/src/scripts/ganeshactl/CMakeLists.txt.orig	2023-04-25 11:36:21.604000000 -0400
+++ nfs-ganesha-5.0/src/scripts/ganeshactl/CMakeLists.txt	2023-04-25 11:36:35.960000000 -0400
@@ -65,7 +65,7 @@
   Ganesha/QtUI/ui_log_dialog.ui
   )
 
-if(Python_FOUND)
+if(PYTHONINTERP_FOUND)
   set(SETUP_PY_IN "${CMAKE_CURRENT_SOURCE_DIR}/setup.py.in")
   set(SETUP_PY    "${CMAKE_CURRENT_BINARY_DIR}/setup.py")
   set(OUTPUT      "${CMAKE_CURRENT_BINARY_DIR}/build/ganeshactl_timestamp")
@@ -139,7 +139,7 @@
 
   add_custom_command(
     OUTPUT ${OUTPUT}
-    COMMAND ${Python_EXECUTABLE} "${SETUP_PY}"  build
+    COMMAND ${PYTHON_EXECUTABLE} "${SETUP_PY}"  build
     COMMAND ${CMAKE_COMMAND} -E touch ${OUTPUT}
     DEPENDS ${GANESHA_SRCS} ${UI_PY_FILES} ${SCRIPTS}
     )
@@ -148,9 +148,9 @@
 
   install(
     CODE
-    "execute_process(WORKING_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR} COMMAND ${Python_EXECUTABLE} ${SETUP_PY} install --skip-build --no-compile --prefix=\$ENV{DESTDIR}${CMAKE_INSTALL_PREFIX})"
+    "execute_process(WORKING_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR} COMMAND ${PYTHON_EXECUTABLE} ${SETUP_PY} install --skip-build --no-compile --prefix=\$ENV{DESTDIR}${CMAKE_INSTALL_PREFIX})"
     )
-endif(Python_FOUND)
+endif(PYTHONINTERP_FOUND)
 
 # Man page
 set(man8_file ganesha_conf.man)
--- nfs-ganesha-5.0/src/scripts/gpfs-epoch/CMakeLists.txt.orig	2023-04-25 11:36:48.972000000 -0400
+++ nfs-ganesha-5.0/src/scripts/gpfs-epoch/CMakeLists.txt	2023-04-25 11:37:03.808000000 -0400
@@ -21,7 +21,7 @@
 #-------------------------------------------------------------------------------
 
 if(USE_FSAL_GPFS)
-  if(Python_FOUND)
+  if(PYTHONINTERP_FOUND)
     set(SETUP_PY_IN "${CMAKE_CURRENT_SOURCE_DIR}/setup.py.in")
     set(SETUP_PY    "${CMAKE_CURRENT_BINARY_DIR}/setup.py")
     set(OUTPUT      "${CMAKE_CURRENT_BINARY_DIR}/build/gpfs_epoch_timestamp")
@@ -59,7 +59,7 @@
     add_custom_command(
       OUTPUT ${OUTPUT}
       COMMAND ${CMAKE_COMMAND} -E touch __init__.py
-      COMMAND ${Python_EXECUTABLE} "${SETUP_PY}"  build
+      COMMAND ${PYTHON_EXECUTABLE} "${SETUP_PY}"  build
       COMMAND ${CMAKE_COMMAND} -E touch ${OUTPUT}
       DEPENDS ${GPFS_EPOCH_SRCS} ${SCRIPTS}
       )
@@ -68,7 +68,7 @@
 
     install(
       CODE
-      "execute_process(WORKING_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR} COMMAND ${Python_EXECUTABLE} ${SETUP_PY} install --skip-build --no-compile --prefix=\$ENV{DESTDIR}${CMAKE_INSTALL_PREFIX} --install-scripts=\$ENV{DESTDIR}${LIBEXECDIR}/ganesha)"
+      "execute_process(WORKING_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR} COMMAND ${PYTHON_EXECUTABLE} ${SETUP_PY} install --skip-build --no-compile --prefix=\$ENV{DESTDIR}${CMAKE_INSTALL_PREFIX} --install-scripts=\$ENV{DESTDIR}${LIBEXECDIR}/ganesha)"
       )
-  endif(Python_FOUND)
+  endif(PYTHONINTERP_FOUND)
 endif(USE_FSAL_GPFS)
